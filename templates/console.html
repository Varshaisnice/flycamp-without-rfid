<!-- Has Changes-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FlyCamp</title>
  <link rel="stylesheet" href="/static/css/console.css" />
 <script defer src="/static/js/console.js?v=5"></script>

</head>
<body>
  <!-- Background decor -->
  <div class="circle top-left"></div>
  <div class="circle bottom-right"></div>
  <!-- Top-right logo toggle (joystick <-> gesture sensor) -->
  <button id="logo-toggle" title="Toggle controller type">
    <img src="/static/assets/flycamplogo.png" alt="FlyCamp" />
  </button>

  <!-- Page 1: Welcome -->
  <div class="screen active" id="page1">
    <div class="vcenter">
      <img class="welcome-logo" src="/static/assets/welcome-logo.png" alt="Welcome to FlyCamp" />
      <div id="loader1" class="mt-12">Waiting for token...</div>
    </div>
  </div>

  <!-- Page 2: RFID confirmation -->
  <div class="screen" id="page2">
    <div class="vcenter">
      <h2 id="greeting">Hi!</h2>
      <p id="user-info"></p>
      <div class="btn-row big">
        <button class="btn-cta" onclick="confirmPlayer()">Confirm</button>
        <button class="btn-ghost" onclick="goToPage('page1')">Back</button>
      </div>
    </div>
  </div>

  <!-- Page 3: Game select -->
  <div class="screen" id="page_choose_game">
    <img id="choose-image" src="/static/assets/choose your game.png" alt="Choose your game" />
    <div class="card-container" id="game-card-container">

      <!-- GAME 1: Mine Seeker -->
      <article class="card"
        data-game-id="1"
        data-title="Mine Seeker"
        data-desc="#rules-mine-seeker">
        <h2 class="card-title">Mine Seeker</h2>

        <div class="point-cards">
          <div class="point-card"><span class="point-bullet"></span><p>An <strong>angel drone</strong> must disarm glowing mines to protect the battlefield.</p></div>
          
        </div>

        <div class="card-media">
          <img class="card-image" src="static/assets/hover_and_seek.png" alt="Mine Seeker Drone"/>
        </div>
      </article>

      <!-- GAME 2: Candy Commander -->
      <article class="card"
        data-game-id="2"
        data-title="Candy Commander"
        data-desc="#rules-candy-commander">
        <h2 class="card-title">Candy Commander</h2>

        <div class="point-cards">
          <div class="point-card"><span class="point-bullet"></span><p>A <strong>hungry Candy Boss</strong> demands sweets — follow its color!</p></div>
          
        </div>

        <div class="card-media">
          <img class="card-image" src="static/assets/hues_the_boss.png" alt="Candy Commander Drone"/>
        </div>
      </article>

      <!-- GAME 3: Code Breaker -->
      <article class="card"
        data-game-id="3"
        data-title="Code Breaker"
        data-desc="#rules-code-breaker">
        <h2 class="card-title">Code Breaker</h2>

        <div class="point-cards">
          <div class="point-card"><span class="point-bullet"></span><p>An <strong>evil AI</strong> is corrupting a data center — decode colors to secure ports.</p></div>
          
        </div>

        <div class="card-media">
          <img class="card-image" src="static/assets/color_chaos.png" alt="Code Breaker Drone"/>
        </div>
      </article>

    </div>
  </div>
<!-- Page 4: Confirm & preview -->
<div class="screen" id="page_confirm">
  <div class="confirm-container">
    <div class="glass-box confirm-right">

      <!-- Game Title -->
      <h2 id="chosen-game-title" class="text-center">You chose:</h2>
      <p id="chosen-game-desc" class="chosen-desc text-center"></p>

      <!-- SINGLE RULES SECTION – No IDs, no margins -->
      <div id="rules-container" class="game-rules">
        <h3 class="rules-title text-center">Rules</h3>
        <div id="active-rules" class="point-cards"></div>
      </div>

      <!-- Buttons -->
      <div class="btn-row big mt-8">
        <button class="btn-ghost" onclick="goToPage('page_choose_game')">Back to Games</button>
        <button class="btn-cta" id="confirm-game-btn" onclick="confirmGame()">Confirm Game</button>
      </div>

    </div>
  </div>

  <!-- Fullscreen video overlay -->
  <div id="video-overlay" class="video-overlay" style="display: none;">
    <video id="game-video" data-src="" playsinline></video>
    <button id="close-video" class="btn-close">Close</button>
    <button id="corner-progress" class="progress-btn"></button>
  </div>
</div>

<!-- HIDDEN RULE TEMPLATES (for JS to clone) -->
<template id="rules-template-mine-seeker">
  <div class="point-card"><span class="point-bullet"></span><p>You have <strong>2 minutes</strong> on the clock.</p></div>
  <div class="point-card"><span class="point-bullet"></span><p>There are <strong>5 mines</strong> in the arena.</p></div>
  <div class="point-card"><span class="point-bullet"></span><p>Fly and <strong>hover over</strong> an active mine to disarm it.</p></div>
  <div class="point-card"><span class="point-bullet"></span><p>Mines stay in place — focus on <strong>speed and control</strong>.</p></div>
  <div class="point-card"><span class="point-bullet"></span><p>Score as much as you can before time runs out!</p></div>
</template>

<template id="rules-template-candy-commander">
  <div class="point-card"><span class="point-bullet"></span><p>Four <strong>candy stations</strong> are always visible.</p></div>
  <div class="point-card"><span class="point-bullet"></span><p>The <strong>Candy Boss flashes a color</strong> cue.</p></div>
  <div class="point-card"><span class="point-bullet"></span><p>Fly to the <strong>matching station</strong> to deliver.</p></div>
  <div class="point-card"><span class="point-bullet"></span><p>Each correct delivery earns <strong>points</strong>.</p></div>
  <div class="point-card"><span class="point-bullet"></span><p>Keep matching quickly to build your <strong>streak</strong>!</p></div>
</template>

<template id="rules-template-code-breaker">
  <div class="point-card"><span class="point-bullet"></span><p>Five <strong>data ports</strong> are always active.</p></div>
  <div class="point-card"><span class="point-bullet"></span><p>A <strong>glitched cue</strong> appears — text, color, or background.</p></div>
  <div class="point-card"><span class="point-bullet"></span><p>Each game uses <strong>one cue type</strong> only.</p></div>
  <div class="point-card"><span class="point-bullet"></span><p>Fly to the <strong>correct port</strong> to secure it.</p></div>
  <div class="point-card"><span class="point-bullet"></span><p><strong>Wrong move = penalty</strong> — stay sharp!</p></div>
</template>
<!-- Page 5: Initialisation -->
<div class="screen" id="page_initializing">
  <div class="content-box init-wrap">

    <!-- ===================== GENERIC RULES – BOLDER & LARGER ===================== -->
    <div class="glass-box" style="
      padding: 36px 40px;
      max-width: 1100px;
      width: 100%;
      margin: 0 auto 40px;
      border-radius: 24px;
      max-height: 520px;
      overflow-y: auto;
      background: rgba(50, 0, 70, 0.35);
      box-shadow: 0 0 24px rgba(255, 0, 255, 0.2);
    ">
      <h2 style="
        font-size: clamp(2.6rem,5.5vw,4.2rem);
        font-weight: 900;
        text-align: center;
        background: linear-gradient(135deg,#fff,#ffb3ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 22px rgba(255,0,255,.6);
        margin: 0 0 24px 0;
        line-height: 1.25;
        letter-spacing: 0.8px;
      ">
        Generic Flying Instructions
      </h2>

      <p style="
        text-align: center;
        color: #f1ccff;
        font-size: 1.25rem;
        margin-bottom: 28px;
        font-weight: 600;
        letter-spacing: 0.4px;
      ">After reading the rules, click “Start Game.”</p>

      <div style="display:flex;flex-direction:column;gap:18px;font-size:1.15rem;">
        <div style="display:flex;gap:16px;align-items:flex-start;">
          <div style="flex-shrink:0;width:26px;height:26px;background:linear-gradient(135deg,#ff00ff,#bf00ff);border-radius:50%;box-shadow:0 0 16px rgba(255,0,255,.85);margin-top:4px;"></div>
          <p style="margin:0;line-height:1.7;"><strong class="neon-highlight">Place your hand</strong> over the mirror surface for <strong class="neon-highlight">3 seconds</strong> to launch the drone.</p>
        </div>
        <div style="display:flex;gap:16px;align-items:flex-start;">
          <div style="flex-shrink:0;width:26px;height:26px;background:linear-gradient(135deg,#ff00ff,#bf00ff);border-radius:50%;box-shadow:0 0 16px rgba(255,0,255,.85);margin-top:4px;"></div>
          <p style="margin:0;line-height:1.7;">The <strong class="neon-highlight">120-second timer</strong> begins only when you score your first point.</p>
        </div>
        <div style="display:flex;gap:16px;align-items:flex-start;">
          <div style="flex-shrink:0;width:26px;height:26px;background:linear-gradient(135deg,#ff00ff,#bf00ff);border-radius:50%;box-shadow:0 0 16px rgba(255,0,255,.85);margin-top:4px;"></div>
          <p style="margin:0;line-height:1.7;"><strong class="neon-highlight">Fly smoothly</strong>, stay inside the arena, and aim for accuracy.</p>
        </div>
        <div style="display:flex;gap:16px;align-items:flex-start;">
          <div style="flex-shrink:0;width:26px;height:26px;background:linear-gradient(135deg,#ff00ff,#bf00ff);border-radius:50%;box-shadow:0 0 16px rgba(255,0,255,.85);margin-top:4px;"></div>
          <p style="margin:0;line-height:1.7;"><strong class="neon-highlight">Score as many points</strong> as possible before time runs out.</p>
        </div>
        <div style="display:flex;gap:16px;align-items:flex-start;border-left:4px solid #ff66ff;padding-left:16px;background:rgba(255,102,255,.15);border-radius:12px;">
          <div style="flex-shrink:0;width:26px;height:26px;background:linear-gradient(135deg,#ff66ff,#bf00ff);border-radius:50%;box-shadow:0 0 18px rgba(255,102,255,.8);margin-top:4px;"></div>
          <p style="margin:0;line-height:1.7;font-weight:700;"><strong class="neon-highlight" style="font-size:1.35em;">Most important rule:</strong> Have fun!</p>
        </div>
      </div>
    </div>

    <!-- ===================== INITIALISING NODES ===================== -->
    <div style="text-align:center;margin-bottom:18px;">
      <div class="spinner" id="init-spinner" style="width:64px;height:64px;margin:12px auto;"></div>
      <h2 style="
        font-size:clamp(1.9rem,4vw,2.8rem);
        background:linear-gradient(135deg,#bf00ff,#ff66ff);
        -webkit-background-clip:text;
        -webkit-text-fill-color:transparent;
        margin:0 0 6px 0;
      ">Initialising Nodes</h2>
      <p id="init-status" class="muted" style="font-size:1rem;">Running connection checks…</p>
    </div>

    <div id="init-steps" style="
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
      gap:14px;
      max-width:960px;
      margin:0 auto 28px;
      padding:0 10px;
    "></div>

    <div id="init-error" class="init-error hidden">
      <p id="init-error-text">Initialisation failed. Please retry.</p>
      <div class="init-actions btn-row big">
        <button class="btn-cta" id="btn-init-retry" onclick="retryConnectionCheck()">Retry</button>
        <button class="btn-ghost" id="btn-init-back" onclick="backToChoose()">Back</button>
      </div>
    </div>

    <div id="start-game-btn" class="btn-row big hidden" style="margin-top:28px;">
      <button class="btn-cta full-width" onclick="startGame()" style="font-size:1.45rem;padding:22px;">
        Start Game
      </button>
    </div>
  </div>
</div>
<!-- Page 5.5: Detailed Initialisation View -->
<div class="screen" id="page_detailed_init">
  <div class="content-box init-wrap">
    <div id="game-rules-dynamic" class="game-rules">
      <div id="rules-dynamic" class="rule-set">
        <h3 id="rules-title-dynamic" class="rules-title">Component Status Overview</h3>
        <ul id="rules-list-dynamic" class="rules-list"></ul>
      </div>
    </div>

    <div class="spinner" aria-hidden="true"></div>
    <h2>Initialising Game Components</h2>
    <p id="detailed-init-status" class="muted">Running connection checks...</p>

    <div id="detailed-init-steps" class="steps"></div>

    <div id="detailed-init-error" class="init-error hidden">
      <p id="detailed-init-error-text">Some components failed to initialise.</p>
      <div class="init-actions btn-row big">
        <button class="btn-cta" onclick="retryConnectionCheck()">Retry</button>
        <button class="btn-ghost" onclick="backToChoose()">Back</button>
      </div>
    </div>
  </div>
</div>


  <!-- Page 6: Leaderboard -->
  <div class="screen" id="page16">
    <div class="lb-wrap">
      <h2 class="lb-title">Final Results</h2>
      <section class="lb-podium">
        <div class="pod first"><div class="pod-rank">1</div><div class="pod-name"></div><div class="pod-score"></div></div>
        <div class="pod second"><div class="pod-rank">2</div><div class="pod-name"></div><div class="pod-score"></div></div>
        <div class="pod third"><div class="pod-rank">3</div><div class="pod-name"></div><div class="pod-score"></div></div>
      </section>
      <section class="lb-table">
        <table>
          <thead><tr><th>Rank</th><th>Pilot</th><th>Score</th></tr></thead>
          <tbody id="leaderboard-body"></tbody>
        </table>
      </section>
      <button class="btn-cta home-btn-bottom" onclick="backToHome()" title="Home">Home</button>
    </div>
  </div>

  <input type="hidden" id="rfidToken" />

  
</body>
</html>








